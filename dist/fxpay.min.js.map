{"version":3,"file":"fxpay.min.js","sources":["fxpay.debug.js"],"names":["window","fxpay","exports","getattr","attr","parts","split","module","trail","i","length","hasOwnProperty","Error","utils","defaults","object","Object","keys","forEach","key","getSelfOrigin","settings","appSelf","origin","win","location","protocol","hostname","getUrlOrigin","url","a","document","createElement","href","host","getCenteredCoordinates","w","h","x","screenX","Math","max","floor","innerWidth","y","screenY","innerHeight","reCenterWindow","winRef","winWidth","winHeight","xy","outerWidth","outerHeight","log","resizeTo","moveTo","e","openWindow","options","title","winOptString","windowRef","open","error","pkgInfo","version","defaultSettings","allowAnyAppReceipt","apiUrlBase","apiVersionPrefix","apiTimeoutMs","extraProviderUrls","fakeProducts","console","debug","info","warn","receiptCheckSites","adapter","hasAddReceipt","payProviderUrls","mozilla/payments/pay/v1","prepareJwtApiUrl","onerror","err","oninit","libVersion","onrestore","productId","initError","localStorage","localStorageKey","mozPay","navigator","mozApps","configure","newSettings","opt","reset","def","param","paySpec","DefaultAdapter","FxInappAdapter","API","baseUrl","this","timeoutMs","versionPrefix","undefined","serialize","obj","str","p","push","encodeURIComponent","join","api","prototype","path","versioned","request","method","data","cb","defaultCType","contentType","defaultHeaders","Accept","headers","test","xhr","XMLHttpRequest","mozSystem","events","abort","evt","load","status","toString","slice","code","responseText","JSON","parse","parseErr","timeout","k","addEventListener","hdr","setRequestHeader","send","get","del","post","put","jwt","decode","callback","jwtData","replace","jwtString","atob","getPayUrl","encodedJwt","payUrl","typ","indexOf","processWebPayment","paymentWindow","managePaymentWindow","payJwt","receivePaymentMessage","event","messageCallback","popupInterval","clearInterval","removeEventListener","close","acceptPayMessage","setInterval","closed","timer","pay","processPayment","payReq","name","onsuccess","allowedOrigin","eventData","errorCode","clearTimeout","setTimeout","expandInfo","ob","guid","smallImageUrl","logo_url","products","all","onResult","allProducts","result","objects","productInfo","getById","onFetch","fetchStubs","productData","addReceiptNatively","receipt","onFinish","receiptReq","addReceipt","addReceiptWithLocStor","allReceipts","getItem","substring","setItem","stringify","verifyReceiptJwt","onVerify","majorParts","jwtParts","base64urldecode","exc","message","verifyReceiptStoreData","product","storedata","params","pair","decodeURIComponent","inapp_id","productUrl","match","isTestReceipt","buyingFakeProducts","selfOrigin","verifyReceiptCheckUrl","urlOk","verifyUrl","verify","domain","s","receipts","nativeNum","Array","call","locNum","storedReceipts","j","add","onRestore","verifyData","iss","verifyResult","reason","newProductInfo","init","manifest","numReceipts","startTransaction","self","inapp","productJWT","webpayJWT","transactionStatus","transData","contribStatusURL","_finishTransaction","fullProductInfo","getAppSelf","appRequest","getSelf","waitForTransaction","maxTries","pollIntervalMs","_tries","isComplete","apply","arguments","storeError","purchase","onPurchase","closePayWindow","partialProdInfo","returnedProdInfo","getProducts"],"mappings":"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"}