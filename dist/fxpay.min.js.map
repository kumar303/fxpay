{"version":3,"file":"fxpay.min.js","sources":["../lib/fxpay/init_module.js","../lib/fxpay/utils.js","../lib/fxpay/settings.js","../lib/fxpay/api.js","../lib/fxpay/jwt.js","../lib/fxpay/pay.js","../lib/fxpay/products.js","../lib/fxpay/receipts.js","../lib/fxpay/adapter.js","../lib/fxpay/index.js"],"names":["window","fxpay","exports","getattr","attr","parts","split","module","trail","i","length","hasOwnProperty","Error","utils","defaults","object","Object","keys","forEach","key","getSelfOrigin","settings","appSelf","origin","win","location","protocol","hostname","getUrlOrigin","url","a","document","createElement","href","host","getCenteredCoordinates","w","h","x","screenX","Math","max","floor","innerWidth","y","screenY","innerHeight","reCenterWindow","winRef","winWidth","winHeight","xy","outerWidth","outerHeight","log","resizeTo","moveTo","e","openWindow","options","title","winOptString","windowRef","open","error","pkgInfo","version","defaultSettings","allowAnyAppReceipt","apiUrlBase","apiVersionPrefix","apiTimeoutMs","extraProviderUrls","fakeProducts","console","debug","info","warn","receiptCheckSites","adapter","hasAddReceipt","payProviderUrls","mozilla/payments/pay/v1","prepareJwtApiUrl","onerror","err","oninit","libVersion","onrestore","productId","initError","localStorage","localStorageKey","mozPay","navigator","mozApps","configure","newSettings","opt","reset","def","param","paySpec","DefaultAdapter","FxInappAdapter","API","baseUrl","this","timeoutMs","versionPrefix","undefined","serialize","obj","str","p","push","encodeURIComponent","join","api","prototype","path","versioned","request","method","data","cb","defaultCType","contentType","defaultHeaders","Accept","headers","test","xhr","XMLHttpRequest","mozSystem","events","abort","evt","load","status","toString","slice","code","responseText","JSON","parse","parseErr","timeout","k","addEventListener","hdr","setRequestHeader","send","get","del","post","put","jwt","decode","callback","jwtData","replace","jwtString","atob","getPayUrl","encodedJwt","payUrl","typ","indexOf","processWebPayment","paymentWindow","managePaymentWindow","payJwt","receivePaymentMessage","event","messageCallback","popupInterval","clearInterval","removeEventListener","close","acceptPayMessage","setInterval","closed","timer","pay","processPayment","payReq","name","onsuccess","allowedOrigin","eventData","errorCode","clearTimeout","setTimeout","expandInfo","ob","guid","smallImageUrl","logo_url","products","all","onResult","allProducts","result","objects","productInfo","getById","onFetch","fetchStubs","productData","addReceiptNatively","receipt","onFinish","receiptReq","addReceipt","addReceiptWithLocStor","allReceipts","getItem","substring","setItem","stringify","verifyReceiptJwt","onVerify","majorParts","jwtParts","base64urldecode","exc","message","verifyReceiptStoreData","product","storedata","params","pair","decodeURIComponent","inapp_id","productUrl","match","isTestReceipt","buyingFakeProducts","selfOrigin","verifyReceiptCheckUrl","urlOk","verifyUrl","verify","domain","s","receipts","nativeNum","Array","call","locNum","storedReceipts","j","add","onRestore","verifyData","iss","verifyResult","reason","newProductInfo","init","manifest","numReceipts","startTransaction","self","inapp","productJWT","webpayJWT","transactionStatus","transData","contribStatusURL","_finishTransaction","fullProductInfo","getAppSelf","appRequest","getSelf","waitForTransaction","maxTries","pollIntervalMs","_tries","isComplete","apply","arguments","storeError","purchase","onPurchase","closePayWindow","partialProdInfo","returnedProdInfo","getProducts"],"mappings":"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"}